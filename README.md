# SpecForge

AI-powered product spec generator. Describe your product or feature, and get user stories, a task board, and risks—generated by Groq's Llama or template fallback.

## How to Run

### Prerequisites

- Node.js 18+
- MongoDB (local or Atlas)
- Groq Cloud API key (optional; template fallback if not set) – get one at [console.groq.com](https://console.groq.com)

### Backend

```bash
cd server
npm install
```

Copy `.env.example` to `.env` and set variables:

```bash
cp .env.example .env
```

Required variables:

```
MONGO_URI=mongodb://127.0.0.1:27017/specforge
JWT_SECRET=your-secret-key-change-in-production
```

Optional:

```
GROQ_API_KEY=...        # Enables AI generation
GROQ_MODEL=llama-3.3-70b-versatile
GROQ_TEMPERATURE=0.6
GROQ_MAX_TOKENS=4096
GROQ_MAX_RETRIES=2
```

```bash
npm run dev    # Development (port 5001)
npm start      # Production
npm test       # Run tests
```

### Frontend

```bash
cd frontend
npm install
```

For production builds, set `VITE_API_URL` in `.env.production` or Vercel env vars:

```
VITE_API_URL=https://your-backend.com/api
```

```bash
npm run dev    # Development (port 5173)
npm run build  # Production build
```

## Deployment

### Backend (Render, Railway, etc.)

1. Connect your repo
2. Set root directory to `server` (or build command: `cd server && npm install && npm start`)
3. Add environment variables: `MONGO_URI`, `JWT_SECRET`, `GROQ_API_KEY` (optional)
4. Deploy

### Frontend (Vercel)

1. Connect your repo
2. Set root directory to `frontend`
3. Build command: `npm run build`
4. Output directory: `dist`
5. Add env: `VITE_API_URL` = your backend URL + `/api` (e.g. `https://your-api.onrender.com/api`)
6. Deploy

### CORS

Ensure your backend allows your frontend origin in the `allowedOrigins` array in `server/server.js`.

## What Is Done

- **Auth**: Register, login, JWT, protected routes
- **User-scoped specs**: Specs belong to the creating user
- **LLM integration**: Groq Cloud (llama-3.3-70b-versatile) with structured JSON output
- **Template fallback**: Rule-based generation when `GROQ_API_KEY` is not set
- **Security**: Helmet, rate limiting, input validation (express-validator)
- **Home page**: Clear steps to use the app
- **Status page**: Health of backend, MongoDB, and LLM
- **Task board**: Drag-and-drop, mark complete, add/delete tasks
- **Export**: Copy as Markdown, download .md or .txt
- **Dark mode**: Theme toggle
- **Error boundary**: Global error handling
- **Tests**: Jest for backend utils


## API Endpoints

| Method | Path | Auth | Description |
|--------|------|------|-------------|
| GET | `/api/health` | No | Health check (backend, DB, LLM) |
| POST | `/api/auth/register` | No | Register user |
| POST | `/api/auth/login` | No | Login |
| GET | `/api/auth/me` | Yes | Current user |
| POST | `/api/generate` | Yes | Generate spec (no save) |
| POST | `/api/spec` | Yes | Save spec |
| GET | `/api/specs` | Yes | List user's specs |
| GET | `/api/spec/:id` | Yes | Get spec |
| DELETE | `/api/spec/:id` | Yes | Delete spec |

## Migration Note

If you have existing specs in MongoDB from before user-scoped specs were added, they will not appear (they lack `createdBy`). You can either delete them or run a migration to assign them to a user.

## Project Structure

```
AGGROSO/
├── frontend/
├── server/
├── .github/workflows/ci.yml
├── README.md
├── AI_NOTES.md
├── PROMPTS_USED.md
└── ABOUTME.md
```
